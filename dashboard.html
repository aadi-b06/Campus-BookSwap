<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Dashboard - Campus BookSwap</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="css/campus-map-dashboard.css">
    <link rel="stylesheet" href="css/messaging.css">
    <link rel="stylesheet" href="css/analytics.css">
    <link rel="stylesheet" href="css/color-scheme.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <style>
        /* Dashboard specific styles */
        .dashboard-container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .dashboard-header h1 {
            color: #2c3e50;
            margin: 0;
        }
        
        .user-welcome {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #3498db;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .user-info h2 {
            margin: 0;
            font-size: 1.2rem;
            color: #2c3e50;
        }
        
        .user-info p {
            margin: 0;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .dashboard-tabs {
            display: flex;
            border-bottom: 1px solid #ecf0f1;
            margin-bottom: 30px;
        }
        
        .tab-button {
            padding: 15px 25px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 1rem;
            font-weight: 500;
            color: #7f8c8d;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tab-button:hover {
            color: #3498db;
        }
        
        .tab-button.active {
            color: #3498db;
            border-bottom-color: #3498db;
        }
        
        .tab-button i {
            margin-right: 8px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* My Listings Tab */
        .action-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
        }
        
        .action-button {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .primary-button {
            background-color: #3498db;
            color: white;
        }
        
        .primary-button:hover {
            background-color: #2980b9;
        }
        
        .secondary-button {
            background-color: #ecf0f1;
            color: #2c3e50;
        }
        
        .secondary-button:hover {
            background-color: #bdc3c7;
        }
        
        .listings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .listing-card {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }
        
        .listing-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        .listing-status {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            z-index: 1;
        }
        
        .status-active {
            background-color: #2ecc71;
            color: white;
        }
        
        .status-pending {
            background-color: #f39c12;
            color: white;
        }
        
        .status-sold {
            background-color: #e74c3c;
            color: white;
        }
        
        .listing-image {
            height: 180px;
            overflow: hidden;
        }
        
        .listing-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .listing-details {
            padding: 15px;
        }
        
        .listing-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
            margin: 0 0 5px 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .listing-author {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin: 0 0 10px 0;
        }
        
        .listing-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .listing-price {
            font-weight: 600;
            color: #3498db;
        }
        
        .listing-type {
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 3px;
            background-color: rgba(52, 152, 219, 0.1);
            color: #3498db;
        }
        
        .listing-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .listing-action-btn {
            flex: 1;
            padding: 8px 0;
            border: none;
            border-radius: 5px;
            font-size: 0.8rem;
            cursor: pointer;
            text-align: center;
        }
        
        .edit-btn {
            background-color: #f39c12;
            color: white;
        }
        
        .edit-btn:hover {
            background-color: #e67e22;
        }
        
        .delete-btn {
            background-color: #e74c3c;
            color: white;
        }
        
        .delete-btn:hover {
            background-color: #c0392b;
        }
        
        .mark-sold-btn {
            background-color: #2ecc71;
            color: white;
        }
        
        .mark-sold-btn:hover {
            background-color: #27ae60;
        }
        
        .empty-state {
            text-align: center;
            padding: 50px 20px;
            background-color: #f9f9f9;
            border-radius: 10px;
        }
        
        .empty-state i {
            font-size: 3rem;
            color: #bdc3c7;
            margin-bottom: 20px;
        }
        
        .empty-state h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .empty-state p {
            color: #7f8c8d;
            margin-bottom: 20px;
        }
        
        /* Messages Tab */
        .messages-container {
            display: flex;
            height: 600px;
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .conversations-list {
            width: 300px;
            border-right: 1px solid #ecf0f1;
            overflow-y: auto;
        }
        
        .conversation-item {
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid #ecf0f1;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .conversation-item:hover, .conversation-item.active {
            background-color: #f9f9f9;
        }
        
        .conversation-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #3498db;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
        }
        
        .conversation-info {
            flex: 1;
        }
        
        .conversation-name {
            font-weight: 500;
            color: #2c3e50;
            margin: 0 0 5px 0;
            display: flex;
            justify-content: space-between;
        }
        
        .conversation-time {
            font-size: 0.8rem;
            color: #7f8c8d;
        }
        
        .conversation-preview {
            font-size: 0.9rem;
            color: #7f8c8d;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin: 0;
        }
        
        .unread-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #3498db;
            margin-left: 5px;
        }
        
        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            padding: 15px;
            border-bottom: 1px solid #ecf0f1;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .chat-header-info h3 {
            margin: 0 0 5px 0;
            color: #2c3e50;
        }
        
        .chat-header-info p {
            margin: 0;
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        
        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .message {
            max-width: 70%;
            padding: 10px 15px;
            border-radius: 10px;
            position: relative;
        }
        
        .message-time {
            font-size: 0.7rem;
            color: #7f8c8d;
            margin-top: 5px;
            text-align: right;
        }
        
        .message-received {
            align-self: flex-start;
            background-color: #f1f1f1;
            color: #2c3e50;
            border-bottom-left-radius: 0;
        }
        
        .message-sent {
            align-self: flex-end;
            background-color: #3498db;
            color: white;
            border-bottom-right-radius: 0;
        }
        
        .chat-input {
            padding: 15px;
            border-top: 1px solid #ecf0f1;
            display: flex;
            gap: 10px;
        }
        
        .chat-input input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .chat-input input:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .send-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #3498db;
            color: white;
            border: none;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        
        .send-btn:hover {
            background-color: #2980b9;
        }
        
        /* Transactions Tab */
        .transactions-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
        }
        
        .transactions-table th, .transactions-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .transactions-table th {
            background-color: #f9f9f9;
            color: #2c3e50;
            font-weight: 500;
        }
        
        .transactions-table tr:hover {
            background-color: #f9f9f9;
        }
        
        .transaction-status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            display: inline-block;
        }
        
        .status-completed {
            background-color: #2ecc71;
            color: white;
        }
        
        .status-in-progress {
            background-color: #f39c12;
            color: white;
        }
        
        .status-cancelled {
            background-color: #e74c3c;
            color: white;
        }
        
        /* Profile Tab */
        .profile-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
        }
        
        .profile-sidebar {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
        }
        
        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background-color: #3498db;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 3rem;
            margin: 0 auto 20px;
        }
        
        .profile-name {
            font-size: 1.5rem;
            color: #2c3e50;
            margin: 0 0 5px 0;
        }
        
        .profile-email {
            color: #7f8c8d;
            margin: 0 0 20px 0;
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-item {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: #3498db;
            margin: 0 0 5px 0;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin: 0;
        }
        
        .profile-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .profile-action-btn {
            padding: 10px;
            border: none;
            border-radius: 5px;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        
        .profile-details {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .profile-section {
            margin-bottom: 30px;
        }
        
        .profile-section h3 {
            color: #2c3e50;
            margin: 0 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .save-changes-btn {
            padding: 12px 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .save-changes-btn:hover {
            background-color: #2980b9;
        }
        
        /* Responsive design */
        @media (max-width: 992px) {
            .profile-container {
                grid-template-columns: 1fr;
            }
            
            .messages-container {
                flex-direction: column;
                height: auto;
            }
            
            .conversations-list {
                width: 100%;
                max-height: 300px;
            }
        }
        
        @media (max-width: 768px) {
            .dashboard-tabs {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 5px;
            }
            
            .tab-button {
                padding: 10px 15px;
            }
            
            .listings-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
        }
        
        /* Notification styles */
        .notification-icon-container {
            position: relative;
            display: inline-block;
            margin-right: 10px;
        }
        
        .notification-icon {
            color: #2c3e50;
            font-size: 1.2rem;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            transition: background-color 0.3s ease;
        }
        
        .notification-icon:hover {
            background-color: rgba(52, 152, 219, 0.1);
        }
        
        .notification-badge {
            position: absolute;
            top: 0;
            right: 0;
            background-color: #e74c3c;
            color: white;
            font-size: 0.7rem;
            font-weight: bold;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        @media (max-width: 576px) {
            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .listings-grid {
                grid-template-columns: 1fr;
            }
            
            .action-bar {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="navbar">
            <div class="logo">
                <h1>Campus BookSwap</h1>
            </div>
            <nav>
                <a href="index.html">Home</a>
                <a href="browse.html">Browse Books</a>
                <a href="sell.html">Sell/Swap</a>
                <a href="dashboard.html" class="active">My Dashboard</a>
                <a href="about.html">About</a>
                <div class="notification-icon-container">
                    <a href="notifications.html" class="notification-icon">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </a>
                </div>
                <a href="#" class="login-btn">Logout</a>
            </nav>
        </div>
    </header>

    <main>
        <div class="dashboard-container">
            <div class="dashboard-header">
                <div class="user-welcome">
                    <div class="user-avatar">JS</div>
                    <div class="user-info">
                        <h2>Welcome, John Smith</h2>
                        <p>Computer Science Department • 3rd Semester</p>
                    </div>
                </div>
            </div>
            
            <div class="dashboard-tabs">
                <button class="tab-button active" data-tab="listings">
                    <i class="fas fa-book"></i> My Listings
                </button>
                <button class="tab-button" data-tab="messages">
                    <i class="fas fa-comments"></i> Messages
                    <span class="unread-indicator"></span>
                </button>
                <button class="tab-button" data-tab="transactions">
                    <i class="fas fa-exchange-alt"></i> Transactions
                </button>
                <button class="tab-button" data-tab="payment-history">
                    <i class="fas fa-credit-card"></i> Payment History
                </button>
                <button class="tab-button" data-tab="forum">
                    <i class="fas fa-users"></i> Community Forum
                </button>
                <button class="tab-button" data-tab="sustainability">
                    <i class="fas fa-leaf"></i> Sustainability
                </button>
                <button class="tab-button" data-tab="analytics">
                    <i class="fas fa-chart-line"></i> Analytics
                </button>
                <button class="tab-button" data-tab="campus-map">
                    <i class="fas fa-map-marker-alt"></i> Campus Map
                </button>
                <button class="tab-button" data-tab="profile">
                    <i class="fas fa-user"></i> Profile
                </button>
            </div>
            
            <!-- My Listings Tab -->
            <div id="listings" class="tab-content active">
                <div class="action-bar">
                    <div class="action-buttons">
                        <button class="action-button primary-button">
                            <i class="fas fa-plus"></i> Add New Listing
                        </button>
                        <button class="action-button secondary-button">
                            <i class="fas fa-filter"></i> Filter
                        </button>
                    </div>
                    <div class="listings-count">
                        Showing 3 listings
                    </div>
                </div>
                
                <div class="listings-grid">
                    <!-- Listing Card 1 -->
                    <div class="listing-card">
                        <div class="listing-status status-active">Active</div>
                        <div class="listing-image">
                            <img src="https://via.placeholder.com/300x180?text=Book+Cover" alt="Book Cover">
                        </div>
                        <div class="listing-details">
                            <h3 class="listing-title">Introduction to Computer Science</h3>
                            <p class="listing-author">By John Smith</p>
                            <div class="listing-meta">
                                <span class="listing-price">$45.00</span>
                                <span class="listing-type">For Sale</span>
                            </div>
                            <div class="listing-actions">
                                <button class="listing-action-btn edit-btn">Edit</button>
                                <button class="listing-action-btn mark-sold-btn">Mark as Sold</button>
                                <button class="listing-action-btn delete-btn">Delete</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Listing Card 2 -->
                    <div class="listing-card">
                        <div class="listing-status status-pending">Pending</div>
                        <div class="listing-image">
                            <img src="https://via.placeholder.com/300x180?text=Book+Cover" alt="Book Cover">
                        </div>
                        <div class="listing-details">
                            <h3 class="listing-title">Calculus: Early Transcendentals</h3>
                            <p class="listing-author">By James Stewart</p>
                            <div class="listing-meta">
                                <span class="listing-price">$35.00</span>
                                <span class="listing-type">For Sale</span>
                            </div>
                            <div class="listing-actions">
                                <button class="listing-action-btn edit-btn">Edit</button>
                                <button class="listing-action-btn mark-sold-btn">Mark as Sold</button>
                                <button class="listing-action-btn delete-btn">Delete</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Listing Card 3 -->
                    <div class="listing-card">
                        <div class="listing-status status-sold">Sold</div>
                        <div class="listing-image">
                            <img src="https://via.placeholder.com/300x180?text=Book+Cover" alt="Book Cover">
                        </div>
                        <div class="listing-details">
                            <h3 class="listing-title">Data Structures and Algorithms</h3>
                            <p class="listing-author">By Robert Lafore</p>
                            <div class="listing-meta">
                                <span class="listing-price">$30.00</span>
                                <span class="listing-type">For Swap</span>
                            </div>
                            <div class="listing-actions">
                                <button class="listing-action-btn edit-btn">Edit</button>
                                <button class="listing-action-btn delete-btn">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Messages Tab -->
            <div id="messages" class="tab-content">
                <div class="messages-container">
                    <div class="conversations-list">
                        <!-- Conversations will be dynamically populated by messaging.js -->
                    </div>
                    
                    <div class="chat-area">
                        <div class="chat-header">
                            <div class="conversation-avatar"></div>
                            <div class="chat-header-info">
                                <h3>Select a conversation</h3>
                                <p>Choose a conversation from the list to start messaging</p>
                            </div>
                        </div>
                        
                        <div class="chat-messages">
                            <!-- Messages will be dynamically populated by messaging.js -->
                            <div class="empty-state">
                                <i class="fas fa-comments"></i>
                                <h3>No Conversation Selected</h3>
                                <p>Select a conversation from the list to view messages</p>
                            </div>
                        </div>
                        
                        <div class="chat-input">
                            <input type="text" placeholder="Type a message...">
                            <button class="send-btn">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Transactions Tab -->
            <div id="transactions" class="tab-content">
                <table class="transactions-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Book</th>
                            <th>Type</th>
                            <th>With</th>
                            <th>Amount</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>May 15, 2023</td>
                            <td>Data Structures and Algorithms</td>
                            <td>Sale</td>
                            <td>Mike Johnson</td>
                            <td>$30.00</td>
                            <td><span class="transaction-status status-completed">Completed</span></td>
                        </tr>
                        <tr>
                            <td>May 10, 2023</td>
                            <td>Calculus: Early Transcendentals</td>
                            <td>Sale</td>
                            <td>Sarah Davis</td>
                            <td>$35.00</td>
                            <td><span class="transaction-status status-in-progress">In Progress</span></td>
                        </tr>
                        <tr>
                            <td>April 28, 2023</td>
                            <td>Physics for Scientists and Engineers</td>
                            <td>Swap</td>
                            <td>David Wilson</td>
                            <td>-</td>
                            <td><span class="transaction-status status-completed">Completed</span></td>
                        </tr>
                        <tr>
                            <td>April 15, 2023</td>
                            <td>Introduction to Psychology</td>
                            <td>Sale</td>
                            <td>Emma Brown</td>
                            <td>$25.00</td>
                            <td><span class="transaction-status status-cancelled">Cancelled</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Payment History Tab -->
            <div id="payment-history" class="tab-content">
                <div class="action-bar">
                    <div class="action-buttons">
                        <button class="action-button secondary-button">
                            <i class="fas fa-filter"></i> Filter
                        </button>
                        <button class="action-button secondary-button">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                    <div class="listings-count">
                        Showing 4 payment records
                    </div>
                </div>
                
                <table class="transactions-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Transaction ID</th>
                            <th>Book</th>
                            <th>Payment Method</th>
                            <th>Amount</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>May 15, 2023</td>
                            <td>PAY-1234567890</td>
                            <td>Data Structures and Algorithms</td>
                            <td>PayPal</td>
                            <td>$30.00</td>
                            <td><span class="transaction-status status-completed">Completed</span></td>
                        </tr>
                        <tr>
                            <td>May 10, 2023</td>
                            <td>PAY-0987654321</td>
                            <td>Calculus: Early Transcendentals</td>
                            <td>Credit Card</td>
                            <td>$35.00</td>
                            <td><span class="transaction-status status-in-progress">Processing</span></td>
                        </tr>
                        <tr>
                            <td>April 15, 2023</td>
                            <td>PAY-5678901234</td>
                            <td>Introduction to Psychology</td>
                            <td>Razorpay</td>
                            <td>$25.00</td>
                            <td><span class="transaction-status status-cancelled">Refunded</span></td>
                        </tr>
                        <tr>
                            <td>March 22, 2023</td>
                            <td>PAY-3456789012</td>
                            <td>Organic Chemistry</td>
                            <td>PayPal</td>
                            <td>$40.00</td>
                            <td><span class="transaction-status status-completed">Completed</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Forum Tab -->
            <div id="forum" class="tab-content">
                <div id="forum-container">
                    <!-- Forum content will be dynamically generated by forum.js -->
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                    </div>
                </div>
            </div>
            
            <!-- Sustainability Tab -->
            <div id="sustainability" class="tab-content">
                <div id="sustainability-container">
                    <!-- Sustainability dashboard content will be dynamically generated by sustainability.js -->
                    <div class="empty-state">
                        <i class="fas fa-leaf"></i>
                        <h3>Loading Sustainability Dashboard...</h3>
                        <p>Track your environmental impact from buying and selling used textbooks.</p>
                    </div>
                </div>
            </div>
            
            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content">
                <div id="analytics-container">
                    <div class="analytics-header">
                        <h2>Your Book Analytics</h2>
                        <p>View insights about your book transactions and savings.</p>
                    </div>
                    
                    <div class="analytics-section">
                        <h3>Listing Performance</h3>
                        <p>See how your listings are performing and get insights to improve visibility.</p>
                        
                        <div class="analytics-cards">
                            <div class="analytics-card">
                                <div class="analytics-card-icon">
                                    <i class="fas fa-eye"></i>
                                </div>
                                <div class="analytics-card-content">
                                    <h4>Total Views</h4>
                                    <p class="analytics-number">245</p>
                                    <p class="analytics-trend positive">↑ 12% from last month</p>
                                </div>
                            </div>
                            
                            <div class="analytics-card">
                                <div class="analytics-card-icon">
                                    <i class="fas fa-comment"></i>
                                </div>
                                <div class="analytics-card-content">
                                    <h4>Inquiries</h4>
                                    <p class="analytics-number">18</p>
                                    <p class="analytics-trend positive">↑ 5% from last month</p>
                                </div>
                            </div>
                            
                            <div class="analytics-card">
                                <div class="analytics-card-icon">
                                    <i class="fas fa-handshake"></i>
                                </div>
                                <div class="analytics-card-content">
                                    <h4>Completed Deals</h4>
                                    <p class="analytics-number">7</p>
                                    <p class="analytics-trend neutral">Same as last month</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="analytics-section">
                        <h3>Your Listings Overview</h3>
                        <p>Quick summary of your current listings status.</p>
                        
                        <div class="analytics-listings-summary">
                            <a href="#" class="view-listings-btn" id="view-my-listings">View My Listings</a>
                            <div class="listings-stats">
                                <div class="listing-stat">
                                    <span class="stat-number">5</span>
                                    <span class="stat-label">Active</span>
                                </div>
                                <div class="listing-stat">
                                    <span class="stat-number">2</span>
                                    <span class="stat-label">Pending</span>
                                </div>
                                <div class="listing-stat">
                                    <span class="stat-number">7</span>
                                    <span class="stat-label">Sold</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Campus Map Tab -->
            <div id="campus-map" class="tab-content">
                <div id="campus-map-container">
                    <!-- Campus map content will be dynamically generated by campus-map-dashboard.js -->
                    <div class="empty-state">
                        <i class="fas fa-map-marker-alt"></i>
                        <h3>Loading Campus Map...</h3>
                        <p>Find book exchange points and manage your meeting locations.</p>
                    </div>
                </div>
            </div>
            
            <!-- Profile Tab -->
            <div id="profile" class="tab-content">
                <div class="profile-container">
                    <div class="profile-sidebar">
                        <div class="profile-avatar">JS</div>
                        <h2 class="profile-name">John Smith</h2>
                        <p class="profile-email">john.smith@university.edu</p>
                        
                        <div class="profile-stats">
                            <div class="stat-item">
                                <h3 class="stat-value">3</h3>
                                <p class="stat-label">Active Listings</p>
                            </div>
                            <div class="stat-item">
                                <h3 class="stat-value">5</h3>
                                <p class="stat-label">Completed Sales</p>
                            </div>
                        </div>
                        
                        <div class="profile-actions">
                            <button class="profile-action-btn primary-button">
                                <i class="fas fa-camera"></i> Change Photo
                            </button>
                            <button class="profile-action-btn secondary-button">
                                <i class="fas fa-key"></i> Change Password
                            </button>
                        </div>
                    </div>
                    
                    <div class="profile-details">
                        <div class="profile-section">
                            <h3>Personal Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="first-name">First Name</label>
                                    <input type="text" id="first-name" value="John">
                                </div>
                                <div class="form-group">
                                    <label for="last-name">Last Name</label>
                                    <input type="text" id="last-name" value="Smith">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="email">Email</label>
                                    <input type="email" id="email" value="john.smith@university.edu" disabled>
                                </div>
                                <div class="form-group">
                                    <label for="phone">Phone Number</label>
                                    <input type="tel" id="phone" value="(123) 456-7890">
                                </div>
                            </div>
                        </div>
                        
                        <div class="profile-section">
                            <h3>Academic Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="university">University</label>
                                    <input type="text" id="university" value="State University">
                                </div>
                                <div class="form-group">
                                    <label for="department">Department</label>
                                    <select id="department">
                                        <option value="computer-science" selected>Computer Science</option>
                                        <option value="business">Business</option>
                                        <option value="engineering">Engineering</option>
                                        <option value="mathematics">Mathematics</option>
                                        <option value="physics">Physics</option>
                                        <option value="chemistry">Chemistry</option>
                                        <option value="biology">Biology</option>
                                        <option value="psychology">Psychology</option>
                                        <option value="literature">Literature</option>
                                        <option value="history">History</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="semester">Current Semester</label>
                                    <select id="semester">
                                        <option value="1">1st Semester</option>
                                        <option value="2">2nd Semester</option>
                                        <option value="3" selected>3rd Semester</option>
                                        <option value="4">4th Semester</option>
                                        <option value="5">5th Semester</option>
                                        <option value="6">6th Semester</option>
                                        <option value="7">7th Semester</option>
                                        <option value="8">8th Semester</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="graduation-year">Expected Graduation Year</label>
                                    <input type="number" id="graduation-year" value="2025">
                                </div>
                            </div>
                        </div>
                        
                        <div class="profile-section">
                            <h3>Notification Preferences</h3>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked> Email notifications for new messages
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked> Email notifications for transaction updates
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox"> Email notifications for new book listings matching your interests
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked> In-app notifications for new messages
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked> In-app notifications for transaction updates
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked> In-app notifications for payment status changes
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked> In-app notifications for new book listings matching your interests
                                </label>
                            </div>
                        </div>
                        
                        <button class="save-changes-btn">Save Changes</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Campus BookSwap</h3>
                <p>A platform for university students to buy, sell, and swap textbooks with peers on campus.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="browse.html">Browse Books</a></li>
                    <li><a href="sell.html">Sell/Swap</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contact Us</h3>
                <p>Email: support@campusbookswap.com</p>
                <p>Phone: (123) 456-7890</p>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 Campus BookSwap. All Rights Reserved.</p>
        </div>
    </footer>

    <script src="main.js"></script>
    <script src="js/features.js"></script>
    <script src="js/campus-map-dashboard.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/messaging.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/forum.js"></script>
    <script src="js/forum-chat.js"></script>
    <script src="js/transaction-manager.js"></script>
    <script src="js/demo-transactions.js"></script>
    <script src="js/analytics.js"></script>
    <link rel="stylesheet" href="css/dashboard-features.css">
    <style>
        /* User avatar with image styles */
        .user-avatar.has-image {
            overflow: hidden;
            padding: 0;
        }
        
        .user-avatar.has-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .profile-avatar.has-image {
            overflow: hidden;
            padding: 0;
        }
        
        .profile-avatar.has-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .auth-provider {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .auth-provider p {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0;
            color: #2c3e50;
        }
        
        .auth-provider i {
            font-size: 1.2rem;
        }
        
        /* Transaction Filter Styles */
        .transaction-filters {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .transaction-filters .filter-btn {
            padding: 0.5rem 1rem;
            border: 2px solid #e0e0e0;
            background: white;
            color: #666;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .transaction-filters .filter-btn:hover {
            border-color: #3498db;
            color: #3498db;
        }
        
        .transaction-filters .filter-btn.active {
            background: #3498db;
            border-color: #3498db;
            color: white;
        }
        
        /* Empty transactions styling */
        .empty-transactions {
            text-align: center;
            padding: 3rem 1rem;
        }
        
        .empty-transactions .empty-state {
            color: #666;
        }
        
        .empty-transactions .empty-state i {
            font-size: 3rem;
            color: #ddd;
            margin-bottom: 1rem;
        }
        
        .empty-transactions .empty-state h3 {
            margin: 0 0 0.5rem 0;
            color: #333;
        }
        
        .empty-transactions .empty-state p {
            margin: 0;
            color: #666;
        }
        
        /* Transaction status improvements */
        .transaction-status {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-completed {
            background: #d4edda;
            color: #155724;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-in-progress {
            background: #cce7ff;
            color: #004085;
        }
        
        .status-cancelled {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
    <script>
        // Initialize notification system
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the notification system
            window.notificationSystem = new NotificationSystem();
            
            // Update notification badge count
            const notificationBadge = document.querySelector('.notification-badge');
            const unreadCount = window.notificationSystem.getUnreadCount();
            
            if (unreadCount > 0) {
                notificationBadge.textContent = unreadCount;
                notificationBadge.style.display = 'flex';
            } else {
                notificationBadge.style.display = 'none';
            }
        });
        
        // Tab Switching
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Remove active class from all buttons and contents
                tabButtons.forEach(btn => btn.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));
                
                // Add active class to clicked button and corresponding content
                this.classList.add('active');
                document.getElementById(this.dataset.tab).classList.add('active');
            });
        });
        
        // Messaging functionality is now handled by messaging.js
        
        // Profile Form Submission is handled by dashboard.js
        
        // Listing Actions
        const editButtons = document.querySelectorAll('.edit-btn');
        const markSoldButtons = document.querySelectorAll('.mark-sold-btn');
        const deleteButtons = document.querySelectorAll('.delete-btn');
        
        editButtons.forEach(button => {
            button.addEventListener('click', function() {
                // In a real app, this would redirect to the edit page for this listing
                // For demo purposes, we'll just show an alert
                alert('Edit listing functionality would go here.');
            });
        });
        
        markSoldButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Get the listing card
                const listingCard = this.closest('.listing-card');
                
                // Get the status element
                const statusElement = listingCard.querySelector('.listing-status');
                
                // Update status
                statusElement.classList.remove('status-active', 'status-pending');
                statusElement.classList.add('status-sold');
                statusElement.textContent = 'Sold';
                
                // Remove the mark as sold button
                this.remove();
                
                // In a real app, this would also update the server
            });
        });
        
        deleteButtons.forEach(button => {
            button.addEventListener('click', function() {
                if (confirm('Are you sure you want to delete this listing?')) {
                    // Get the listing card
                    const listingCard = this.closest('.listing-card');
                    
                    // Remove the listing card with animation
                    listingCard.style.opacity = '0';
                    setTimeout(() => {
                        listingCard.remove();
                        
                        // Update listings count
                        const listingsCount = document.querySelector('.listings-count');
                        const currentCount = parseInt(listingsCount.textContent.match(/\d+/)[0]);
                        listingsCount.textContent = `Showing ${currentCount - 1} listings`;
                        
                        // If no listings left, show empty state
                        if (currentCount - 1 === 0) {
                            const listingsGrid = document.querySelector('.listings-grid');
                            listingsGrid.innerHTML = `
                                <div class="empty-state">
                                    <i class="fas fa-book"></i>
                                    <h3>No Listings Yet</h3>
                                    <p>You haven't listed any books for sale or swap yet.</p>
                                    <button class="action-button primary-button">
                                        <i class="fas fa-plus"></i> Add New Listing
                                    </button>
                                </div>
                            `;
                        }
                    }, 300);
                    
                    // In a real app, this would also delete from the server
                }
            });
        });
        
        // Add New Listing Button
        document.querySelector('.primary-button').addEventListener('click', function() {
            // Redirect to the sell page
            window.location.href = 'sell.html';
        });
    </script>
</body>
</html>